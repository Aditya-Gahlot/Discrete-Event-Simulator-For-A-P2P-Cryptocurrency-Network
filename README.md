# Discrete-Event-Simulator-For-A-P2P-Cryptocurrency-Network
----------------------------------------------------------------------------------------------

In this repository we will build our own discrete event simulator(DES) for a P2P cryptocurrency network. This project can be done in groups consisting of 3 persons.

# Problem Statement
--------------------------------------------------

A discrete event simulator(DES) for a P2P cryptocurrency network.

## Properties of cryptocurrency network
-------------------------------------------------------------------

 * There are n peers, each with a unique ID, where n is set at the time of initiation of the network. Some of these nodes say z percent set at the start of the simulation are labeled \slow" and the others \fast". We will use this classification below.
 
 * Each peer generates transactions randomly in time. The interarrival between transactions generated by any peer is chosen from an exponential distribution whose mean
time can be set as a parameter of the simulator.

* Each peer is connected to a random number of other peers

* Simulate latencies Lij between pairs of peers i and j. Latency is the time between which a message m was transmitted from sender i and received by another node j. Choose the latency to be of the form ρij +jmj=cij +dij, where ρij is a positive minimum value corresponding to speed of light propagation delay, jmj denotes the length of the message in bits, cij is the bottleneck link speed between i and j in bits per second, and dij is the queuing delay on the path randomly chosen from an exponential distribution with some mean. 

* A node forwards any transaction heard from one peer to another connected peer, provided it has not already heard the same transaction from that peer, or provided it did not hear (receive) that transaction from that peer.

* Peer k generates a random variable Tk on hearing a block at time tk. Each block has a unique ID, say BlkID. All nodes have the genesis block. Tk is chosen from an exponential distribution with some mean (expected value) which can be set as a simulation parameter. 

* Each node maintains a tree of all blockchains heard since the start of the simulation. The node stores the time of arrival of every block in its tree. This information is written to a file at the end of the simulation.

## Implementation Details
------------------------------------------------

We have implemented the assignment in Python, and tested it on window machine. The core of the simulation is a priority queue which holds events prioritized by their
scheduled time. There are 4 types of events: 
        1) Transaction Generate
        2) Transaction Receive
        3) Block Generate
        4) Block Receive
        
Since nodes keep generating events and the simulation is potentially infinite, we used a limit on the number of events that are run. This can also be passed as a parameter to the program.

At the end of the simulation, each node dumps its blockchain tree in the DOT graph description language, which are rendered into .png images using the Graphviz tool. We also created a graph depicting the connections between nodes to visualise the network.

## How to Run the code ?
----------------------------------------------------

In the source directory, run: `python run.py [n] [z] [tm] [bm]`

Where,

      n is the number of nodes
      
      z is the fraction of slow nodes
      
      tm, bm are the mean transaction & block interarrival times respectively
      
By default, simulations run for a maximum of 1000 events. To change that pass `--until` parameter and to suppress printing of event log use `-q`:

For eg: `python run.py 10 0.3 3 10 -q --until 5000`

Generated charts are stored in output directory.

## Output Screenshot
----------------------------------------------------------------

